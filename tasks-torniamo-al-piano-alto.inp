digraph {
#
# Nodi
#
##"Spegnimento di tutte le VM" [shape="box", style="filled",color="green"];


#"Spegnimento di tutte le VM" [label="2.Spegnimento di tutte le VM (Massimo)"shape="box", style="bold"];


# Dipendenze
#
"Spegnimento delle VM dai compute node da aggiornare a AlmaLinux9" -> "Migrare le VM che stanno sui compute node da migrare"
"Spegnimento delle VM dai compute node da aggiornare a AlmaLinux9" -> "Spegnimento delle altre VM"
"Migrare le VM che stanno sui compute node da migrare" -> "Reinstallare cld-np-21"
"Reinstallare cld-np-21" -> "Spegnere e spostare sul piano alto cld-np-21"
"Migrare le VM che stanno sui compute node da migrare" -> "Reinstallare cld-np-22"
"Reinstallare cld-np-22" -> "Spegnere e spostare sul piano alto cld-np-22"
"Migrare le VM che stanno sui compute node da migrare" -> "Reinstallare cld-np-23"
"Reinstallare cld-np-23" -> "Spegnere e spostare sul piano alto cld-np-23"
"Migrare le VM che stanno sui compute node da migrare" -> "Reinstallare cld-dfa-07"
"Reinstallare cld-dfa-07" -> "Spegnere e spostare sul piano alto cld-dfa-07"

"Spegnimento delle altre VM" -> "Spegnimento OpenStack su tutti i compute node e t2-cld-nat"
"Migrare le VM che stanno sui compute node da migrare" -> "Spegnimento OpenStack su tutti i compute node e t2-cld-nat"
"Spegnimento OpenStack su tutti i compute node e t2-cld-nat" -> "Spegnere e spostare sul piano alto t2-cld-nat"
"Spegnimento OpenStack su tutti i compute node e t2-cld-nat" -> "Spegnere e spostare sul piano alto tutti i compute node tranne np-21..np-23, dfa-07 e la blade"
"Spegnimento OpenStack su tutti i compute node e t2-cld-nat" -> "Spegnimento OpenStack sui controller"
"Spegnimento OpenStack sui controller" -> "Spegnere e spostare cld-ctrl-0x sul piano alto"
"Spegnimento OpenStack sui controller" -> "Spegnere e spostare cld-storage-01 sul piano alto"
"Reinstallare cld-np-21" -> "Spegnere e spostare cld-config sul piano alto"
"Reinstallare cld-np-22" -> "Spegnere e spostare cld-config sul piano alto"
"Reinstallare cld-np-23" -> "Spegnere e spostare cld-config sul piano alto"
"Reinstallare cld-dfa-07" -> "Spegnere e spostare cld-config sul piano alto"
"Spegnimento OpenStack sui controller" -> "Spegnere cluster percona"
"Spegnere cluster percona" -> "Spegnere altre VM sul cluster proxmox"
"Spegnere altre VM sul cluster proxmox" -> "Spegnere e spostare sul piano alto le cld-px"
"Spegnere altre VM sul cluster proxmox" -> "Spegnere cluster ceph"
"Spegnere cluster ceph" -> "Spegnere e spostare ceph-mon-01 sul piano alto"
"Spegnere cluster ceph" -> "Spegnere e spostare ceph-osd* sul piano alto"
"Spegnere cluster ceph" -> "Spegnere ceph-mon-02/03 (stanno sulla blade)"
"Spegnere e spostare ceph-mon-01 sul piano alto" -> "Spegnere cld-log (sta sulla blade)"
"Spegnere e spostare ceph-osd* sul piano alto" -> "Spegnere cld-log (sta sulla blade)"
"Spegnere ceph-mon-02/03 (stanno sulla blade)" -> "Spegnere cld-log (sta sulla blade)"

"Spegnere cld-log (sta sulla blade)" -> "Spegnere e spostare sul piano alto la blade"

"Spegnere e spostare sul piano alto cld-dfa-07" -> "Spegnere e spostare sul piano alto cld-nat"
"Spegnere e spostare sul piano alto cld-np-21" -> "Spegnere e spostare sul piano alto cld-nat"
"Spegnere e spostare sul piano alto cld-np-22" -> "Spegnere e spostare sul piano alto cld-nat"
"Spegnere e spostare sul piano alto cld-np-23" -> "Spegnere e spostare sul piano alto cld-nat"


"Spegnere e spostare sul piano alto la blade" -> "Spegnere e spostare sul piano alto cld-nat"


"Spegnere e spostare cld-ctrl-0x sul piano alto" -> "Spegnere e spostare sul piano alto cld-nat"
"Spegnere e spostare sul piano alto t2-cld-nat" -> "Spegnere e spostare sul piano alto cld-nat"
"Spegnere e spostare sul piano alto tutti i compute node tranne np-21..np-23, dfa-07 e la blade" -> "Spegnere e spostare sul piano alto cld-nat"
"Spegnere e spostare cld-config sul piano alto" -> "Spegnere e spostare sul piano alto cld-nat"

"Spegnere e spostare sul piano alto i wp* e gli up-01*" -> "Spegnere e spostare t2-nfs-ui sul piano alto"
"Spegnere e spostare t2-ui* sul piano alto" -> "Spegnere e spostare t2-nfs-ui sul piano alto"


"Spegnere e spostare t2-nfs-ui sul piano alto" -> "Spegnimento e spostamento t2-master sul piano alto"
"Spegnere e spostare sul piano alto i wp* e gli up-01*" -> "Spegnere e spostare t2-squid-02 sul piano alto"
"Spegnere e spostare sul piano alto cld-nat" -> "Spostamento switches Cloud e T2 sul piano alto"
"Spegnere e spostare t2-squid-02 sul piano alto" -> "Spegnimento e spostamento t2-master sul piano alto"
"Spegnere e spostare sul piano alto i wp* e gli up-01*" -> "Spegnere t2-kvm* (e VM li' ospitate) e spostala sul piano alto"
"Spegnere t2-kvm* (e VM li' ospitate) e spostala sul piano alto" -> "Spegnimento e spostamento t2-master sul piano alto"
"Spegnimento e spostamento t2-master sul piano alto" -> "Spostamento switches Cloud e T2 sul piano alto" 
"Spostamento switches Cloud e T2 sul piano alto" -> "Ricablaggio"
"Ricablaggio" -> "Riaccendere t2-master"
"Ricablaggio" -> "Riaccedere cld-nat"
"Riaccedere cld-nat" ->  "Riaccedere ceph-mon* e ceph-osd*" 
"Riaccedere ceph-mon* e ceph-osd*" -> "Riattivare cluster ceph"
"Riattivare cluster ceph" -> "Riaccendere cld-px*"
"Riaccendere cld-px*" -> "Riaccendere cdl-log (e mount volume ceph)"
"Riaccendere cdl-log (e mount volume ceph)" -> "Riaccendere cluster percona"
"Riaccendere cluster percona" -> "Riaccendere altre VM cluster px"
"Riaccendere altre VM cluster px" -> "Riaccendere cld-ctrl-0x e start servizi sui controller"
"Riaccendere cld-ctrl-0x e start servizi sui controller" -> "Accensione cld-config e modifica puppet in modo che i servizi partano sui compute"
"Riaccendere cld-ctrl-0x e start servizi sui controller" -> "Riaccensione t2-cld-nat e start servizi openstack"
"Accensione cld-config e modifica puppet in modo che i servizi partano sui compute" -> "Accensione compute node a Padova"
"Accensione cld-config e modifica puppet in modo che i servizi partano sui compute" -> "Restart servizi Openstack a LNL (basta runnare puppet)"
"Accensione compute node a Padova" -> "Accensione gate e altre VM su Cloud di servizio"
"Restart servizi Openstack a LNL (basta runnare puppet)" -> "Accensione gate e altre VM su Cloud di servizio"
"Accensione gate e altre VM su Cloud di servizio" -> "Test"
"Accensione gate e altre VM su Cloud di servizio" -> "Riaccensione cld-storage-01"
"Test" -> "Annuncio agli utenti"

"Riaccendere t2-master" -> "Riaccendere t2-nfs-ui"
"Riaccendere t2-master"	 -> "Riaccendere t2-squid-02"
"Riaccendere t2-master"	 -> "Riaccendere t2-kvm-* e VM li' ospitate"
"Riaccendere t2-nfs-ui" -> "Riaccedere t2-ui*, wp* e up-01*"
"Riaccendere t2-squid-02" -> "Riaccedere t2-ui*, wp* e up-01*"
"Riaccendere t2-kvm-* e VM li' ospitate" -> "Riaccedere t2-ui*, wp* e up-01*"
"Riaccendere t2-nfs-ui" -> "Test"


}