digraph {
# Dipendenze
#
"Spegnimento delle VM dai compute-node da liberare" -> "Migrazione delle VM dai compute-node da liberare"
"Spegnimento delle VM dai compute-node da liberare" -> "Spegnimento delle VM dagli altri compute node"
"Migrazione delle VM dai compute-node da liberare" -> "Spegnimento Openstack su tutti i compute node (via puppet) e t2-cld-nat"
"Spegnimento delle VM dagli altri compute node" -> "Spegnimento Openstack su tutti i compute node (via puppet) e t2-cld-nat"
"Spegnimento Openstack su tutti i compute node (via puppet) e t2-cld-nat" -> "Spegnimento OpenStack sui controller node"
"Spegnimento OpenStack sui controller node" -> "Spegnimento cld-storage-01"
"Spegnimento OpenStack sui controller node" -> "Spegnimento cld-np* (tranne cld-np-gpu-xx)"
"Spegnimento OpenStack sui controller node" -> "Spegnimento cld-unipd*"
"Spegnimento OpenStack sui controller node" -> "Spegnimento cld-ctrl*"
"Spegnimento OpenStack sui controller node" -> "Spegnimento cld-dfa*(tranne cld-dfa-gpu-xx)"
"Spegnimento OpenStack sui controller node" -> "Spegnimento rsyslog e umount del volume ceph da cld-log"
"Spegnimento rsyslog e umount del volume ceph da cld-log" -> "Aggiornamento a AlmaLinux9 di cld-log"
"Aggiornamento a AlmaLinux9 di cld-log" -> "Spegnimento di cld-log"
"Spegnimento rsyslog e umount del volume ceph da cld-log" -> "Spegnimento ceph-*rgw"
"Spegnimento ceph-*rgw" -> "Stop servizi ceph"
"Stop servizi ceph" -> "Spegnimento ceph-osd-*"
"Spegnimento ceph-osd-*" -> "Spegnimento ceph-mon*"
"Spegnimento ceph-mon*" -> "Spegnimento blade1" 
"Spegnimento OpenStack sui controller node" -> "Spegnimento cluster percona"
"Spegnimento cluster percona" -> "Spegnimento altre VM sul cluster cld-px"
"Spegnimento di cld-log" -> "Spegnimento blade1"
"Spegnimento cld-np* (tranne cld-np-gpu-xx)" -> "Spegnimento blade1"
"Spegnimento altre VM sul cluster cld-px" -> "Spegnimento cld-px*"
"Spegnimento cld-px*" -> "Spegnimento ceph-*rgw"
"Spegnimento OpenStack sui controller node" -> "Salvataggio /var/lib/nova/instances di cld-np-xx e cld-dfa-gpu-xx su cld-elx*"
"Salvataggio /var/lib/nova/instances di cld-np-xx e cld-dfa-gpu-xx su cld-elx*" -> "Aggiornamento di cld-np-xx e cld-dfa-gpu-xx e ripristino di /var/lib/nova/instances"
"Aggiornamento di cld-np-xx e cld-dfa-gpu-xx e ripristino di /var/lib/nova/instances" -> "Spegnimento di cld-elx*"
"Aggiornamento di cld-np-xx e cld-dfa-gpu-xx e ripristino di /var/lib/nova/instances" -> "Spegnimento di cld-np-gpu-xx"
"Aggiornamento di cld-np-xx e cld-dfa-gpu-xx e ripristino di /var/lib/nova/instances" -> "Spegnimento di cld-dfa-gpu-xx"
"Aggiornamento di cld-np-xx e cld-dfa-gpu-xx e ripristino di /var/lib/nova/instances" -> "Spegnimento di cld-config"
"Aggiornamento a AlmaLinux9 di cld-log" -> "Spegnimento di cld-config"
"Spegnimento di cld-config" -> "Spegnimento di cld-nat"
"Spegnimento cld-px*" -> "Spegnimento di cld-nat"
"Spegnimento cld-np* (tranne cld-np-gpu-xx)" -> "Spegnimento di cld-nat"
"Spegnimento cld-storage-01" -> "Spegnimento di cld-nat"
"Spegnimento cld-unipd*" -> "Spegnimento di cld-nat"
"Spegnimento ceph-mon*" -> "Spegnimento di cld-nat"
"Spegnimento di cld-elx*"-> "Spegnimento di cld-nat"
"Spegnimento di cld-dfa-gpu-xx" -> "Spegnimento di cld-nat"
"Spegnimento di cld-np-gpu-xx" -> "Spegnimento di cld-nat"
"Spegnimento cld-ctrl*" -> "Spegnimento di cld-nat"
"Spegnimento cld-dfa*(tranne cld-dfa-gpu-xx)" -> "Spegnimento di cld-nat"
"Spegnimento di cld-nat" -> "Sostituzione quadro elettrico CDZ"
"Sostituzione quadro elettrico CDZ" -> "Accensione cld-nat"
"Accensione cld-nat" -> "Accesione blade1"
"Accesione blade1" -> "Accensione ceph-mon-02/03"
"Accensione cld-nat" -> "Accensione ceph-mon-01"
"Accensione ceph-mon-01" -> "Accensione ceph-osd*"
"Accensione ceph-mon-02/03" -> "Accensione ceph-osd*"
"Accensione ceph-osd*" -> "Attivazione cluster ceph"
"Attivazione cluster ceph" -> "Accensione cld-px*"
"Accensione cld-log (e mount volume ceph)" -> "Accensione cluster percona"

"Accensione cluster percona" -> "Accensione altre VM cluster px"
"Accensione cld-px*" -> "Accensione cld-log (e mount volume ceph)"
"Accensione altre VM cluster px" -> "Accensione cld-ctrl* e start servizi OpenStack sui controller"
"Accensione cld-ctrl* e start servizi OpenStack sui controller" -> "Accensione cld-config e modifica puppet in modo che i servizi openstack partano sui compute"
"Accensione cld-config e modifica puppet in modo che i servizi openstack partano sui compute" -> "Accensione compute node Padova"
"Accensione cld-config e modifica puppet in modo che i servizi openstack partano sui compute" -> "Restart servizi OpenStack a LNL (basta runnare puppet)"
"Accensione cld-ctrl* e start servizi OpenStack sui controller" -> "Accensione t2-cld-nat"
"Accensione compute node Padova" -> "Accensione gate e altre VM di servizi"
"Restart servizi OpenStack a LNL (basta runnare puppet)" -> "Accensione gate e altre VM di servizi"
"Accensione t2-cld-nat" -> "Accensione gate e altre VM di servizi"
"Accensione gate e altre VM di servizi" -> "Test"
"Test" -> "Annuncio agli utenti"
"Annuncio agli utenti" -> "Aggiornamento a AlmaLinux9 dei compute node che erano stati liberati da VM"
"Aggiornamento a AlmaLinux9 dei compute node che erano stati liberati da VM" -> "Disabilutazione di altri compute node da aggiornare a AlmaLinux9"
}